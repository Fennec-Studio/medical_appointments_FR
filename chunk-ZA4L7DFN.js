import{a as $}from"./chunk-PGSFEXOD.js";import{a as ee}from"./chunk-MM757KGP.js";import{a as H,b as z,c as O,d as R,e as Z,f as q,g as J,h as K,i as Q,k as X}from"./chunk-QBWNDVWI.js";import{$ as f,A as a,B as h,Da as Y,F as L,H as u,J as F,K as C,L as S,M,N as t,O as o,P as y,Q as k,R as g,S as s,T as N,U as D,V as r,W as v,X as E,Y as j,Z as x,_,ba as W,c as T,ca as B,da as V,n as U,pa as P,ra as A,s as p,t as m,u as b,v as w,xa as G,z as I}from"./chunk-RB3ABCDU.js";var oe=()=>[],ie=d=>({"text-blue-600 bg-blue-100 hover:bg-blue-200 hover:text-blue-700":d}),re=d=>({hidden:d});function ne(d,l){if(d&1){let e=k();t(0,"tr",7)(1,"th",14),r(2),o(),t(3,"td",15),r(4),o(),t(5,"td",15),r(6),o(),t(7,"td",15)(8,"div",16)(9,"a",17),r(10),o(),t(11,"a",17),r(12),o()()(),t(13,"td",18)(14,"button",19),b(),t(15,"svg",20),y(16,"path",21),o()(),w(),t(17,"button",22),g("click",function(){let i=p(e).$implicit,c=s();return m(c.toggleModal(i.id))}),b(),t(18,"svg",20),y(19,"path",23),o()(),w(),t(20,"button",24),b(),t(21,"svg",20),y(22,"path",25),o()()()()}if(d&2){let e=l.$implicit;a(2),j(" ",e.first_name," ",e.last_name," "),a(2),E(" ",e.speciality," "),a(2),E(" ",e.room," "),a(3),D("href","tel:",e.phone,"",I),a(),v(e.phone),a(),D("href","mailto:",e.email,"",I),a(),v(e.email)}}function ae(d,l){if(d&1){let e=k();t(0,"li")(1,"button",26),g("click",function(){let i=p(e).$index,c=s();return m(c.updatePageIdx(i+1))}),r(2),o()()}if(d&2){let e=l.$index,n=s();a(),u("ngClass",V(2,ie,e+1===n.pageIdx)),a(),v(e+1)}}function le(d,l){if(d&1&&(t(0,"option",43),r(1),o()),d&2){let e=l.$implicit;N("value",e.id),a(),v(e.name)}}function de(d,l){if(d&1){let e=k();t(0,"div",13)(1,"form",27),g("submit",function(){p(e);let i=s();return m(i.submitFormUpdate())}),t(2,"div",28)(3,"h2",29),r(4,"Editar informaci\xF3n del doctor"),o(),t(5,"div",30),g("click",function(){p(e);let i=s();return m(i.toggleModal())}),b(),t(6,"svg",31),y(7,"path",32),o()()(),w(),t(8,"div",33)(9,"div",34)(10,"label",35),r(11,"Apellidos doctor"),o(),t(12,"input",36),f("ngModelChange",function(i){p(e);let c=s();return _(c.doctorToUpdate.last_name,i)||(c.doctorToUpdate.last_name=i),m(i)}),o()(),t(13,"div",34)(14,"label",37),r(15,"Nombre(s) doctor"),o(),t(16,"input",38),f("ngModelChange",function(i){p(e);let c=s();return _(c.doctorToUpdate.first_name,i)||(c.doctorToUpdate.first_name=i),m(i)}),o()()(),t(17,"div",33)(18,"div",34)(19,"label",39),r(20,"Sala doctor"),o(),t(21,"input",40),f("ngModelChange",function(i){p(e);let c=s();return _(c.doctorToUpdate.room,i)||(c.doctorToUpdate.room=i),m(i)}),o()(),t(22,"div",34)(23,"label",41),r(24,"Especialidad doctor"),o(),t(25,"select",42),f("ngModelChange",function(i){p(e);let c=s();return _(c.doctorToUpdate.speciality_id,i)||(c.doctorToUpdate.speciality_id=i),m(i)}),S(26,le,2,2,"option",43,C),o()()(),t(28,"div",33)(29,"div",34)(30,"label",44),r(31,"Licencia doctor"),o(),t(32,"input",45),f("ngModelChange",function(i){p(e);let c=s();return _(c.doctorToUpdate.license,i)||(c.doctorToUpdate.license=i),m(i)}),o()()(),t(33,"div",46)(34,"button",47),g("click",function(){p(e);let i=s();return m(i.toggleModal())}),r(35," Cancelar "),o(),t(36,"button",48),r(37," Guardar "),o()()()()}if(d&2){let e=s();u("ngClass",V(11,re,!e.showModal)),a(12),x("ngModel",e.doctorToUpdate.last_name),u("value",e.doctorToUpdate.last_name),a(4),x("ngModel",e.doctorToUpdate.first_name),u("value",e.doctorToUpdate.first_name),a(5),x("ngModel",e.doctorToUpdate.room),u("value",e.doctorToUpdate.room),a(4),x("ngModel",e.doctorToUpdate.speciality_id),u("value",e.doctorToUpdate.speciality_id),a(),M(e.specialitySelect),a(6),x("ngModel",e.doctorToUpdate.license),u("value",e.doctorToUpdate.license)}}var te=class d{constructor(l,e,n,i){this._doctorService=l;this._specialtyService=e;this._authService=n;this._router=i}doctorList=[];pages=0;pageIdx=1;showModal=!1;doctorToUpdate={};specialitySelect=[];ngOnInit(){this._authService.isLogged()?this.retrieveData():this._router.navigate(["/"])}retrieveData(){return T(this,null,function*(){yield this._doctorService.loadDoctors().subscribe(l=>{this.doctorList=l,this.paginationSetup()})})}paginationSetup(){this.doctorList.length===0&&(this.pages=1),this.pages=Math.ceil(this.doctorList.length/5)}updatePageIdx(l){this.pageIdx=l}showContentPage(l){return this.pageIdx=l,this.doctorList.slice((this.pageIdx-1)*5,this.pageIdx*5)}toggleModal(l){return T(this,null,function*(){l&&(this.doctorToUpdate=this.doctorList.find(e=>e.id==l),yield this._specialtyService.loadSpecialties().subscribe(e=>{this.specialitySelect=e})),this.showModal=!this.showModal})}submitFormUpdate(){this._doctorService.updateDoctor(this.doctorToUpdate).subscribe(l=>{l.status===200?(this.retrieveData(),this.toggleModal()):alert("Error updating doctor")})}static \u0275fac=function(e){return new(e||d)(h($),h(ee),h(Y),h(G))};static \u0275cmp=U({type:d,selectors:[["app-doctors"]],standalone:!0,features:[W],decls:36,vars:4,consts:[[1,"flex","flex-col","justify-center","font-IBM","bg-whiteFixed","rounded-md","shadow-sm","my-10","mx-20","p-6","space-y-4"],[1,"text-3xl","font-medium"],[1,"text-sm","text-slate-500"],[1,"relative","overflow-x-auto"],[1,"w-full","text-sm","text-left","rtl:text-right","text-gray-500"],[1,"text-xs","text-gray-700","uppercase","bg-gray-100"],["scope","col",1,"px-6","py-3"],[1,"bg-white","border-b","hover:bg-gray-50"],[1,"flex","justify-end"],["aria-label","Page navigation example"],[1,"inline-flex","-space-x-px","text-sm"],[1,"flex","items-center","justify-center","px-3","h-8","ms-0","leading-tight","text-gray-500","bg-white","border","border-e-0","border-gray-300","rounded-s-lg","hover:bg-gray-100","hover:text-gray-700",3,"click","disabled"],[1,"flex","items-center","justify-center","px-3","h-8","leading-tight","text-gray-500","bg-white","border","border-gray-300","rounded-e-lg","hover:bg-gray-100","hover:text-gray-700",3,"click","disabled"],[1,"w-full","bg-black","bg-opacity-70","h-screen","z-50","fixed","inset-0","flex","items-center",3,"ngClass"],["scope","row",1,"px-6","py-4","font-medium","text-gray-900","whitespace-nowrap"],[1,"px-6","py-4"],[1,"flex","flex-col"],[1,"text-primaryBlue","hover:text-secondaryBlue",3,"href"],[1,"flex","flex-row","space-x-2","px-6","py-2"],["type","button",1,"text-white","bg-primaryGreen","hover:bg-secondaryGreen","focus:ring-4","focus:outline-none","focus:ring-blue-300","font-medium","rounded-lg","text-sm","p-2","text-center","inline-flex","items-center"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","none","viewBox","0 0 24 24",1,"w-4","h-4","text-white"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 11.917 9.724 16.5 19 7.5"],["type","button",1,"text-sm","p-2","text-center","inline-flex","items-center","text-white","bg-orange-300","hover:bg-orange-400","focus:ring-4","focus:outline-none","focus:ring-blue-300","font-medium","rounded-lg",3,"click"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m14.304 4.844 2.852 2.852M7 7H4a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1v-4.5m2.409-9.91a2.017 2.017 0 0 1 0 2.853l-6.844 6.844L8 14l.713-3.565 6.844-6.844a2.015 2.015 0 0 1 2.852 0Z"],["type","button",1,"text-sm","p-2","text-center","inline-flex","items-center","text-white","bg-red-400","hover:bg-red-600","focus:ring-4","focus:outline-none","focus:ring-blue-300","font-medium","rounded-lg"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 7h14m-9 3v8m4-8v8M10 3h4a1 1 0 0 1 1 1v3H9V4a1 1 0 0 1 1-1ZM6 7h12v13a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V7Z"],[1,"flex","items-center","justify-center","px-3","h-8","leading-tight","text-gray-500","bg-white","border","border-gray-300","hover:bg-gray-100","hover:text-gray-700",3,"click","ngClass"],[1,"container","mx-auto","flex","flex-col","space-y-4","bg-white","max-w-4xl","h-auto","rounded-md","p-4",3,"submit"],[1,"flex","justify-between","items-center"],[1,"text-2xl","font-IBM","font-semibold"],[1,"text-white","hover:bg-gray-300","border","font-medium","rounded-lg","p-2","flex","items-center",3,"click"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","none","viewBox","0 0 24 24",1,"w-6","h-6","text-slate-800"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18 17.94 6M18 18 6.06 6"],[1,"flex","flex-row","space-x-4"],[1,"w-full"],["for","lastName_doctor",1,"block","mb-1","text-sm","font-medium","text-gray-900"],["type","text","name","last_name","id","lastName_doctor","placeholder","Ingrese los apellidos del doctor",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5",3,"ngModelChange","ngModel","value"],["for","firstName_doctor",1,"block","mb-1","text-sm","font-medium","text-gray-900"],["type","text","name","first_name","id","firstName_doctor","placeholder","Ingrese nombre(s) del doctor",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5",3,"ngModelChange","ngModel","value"],["for","room_doctor",1,"block","mb-1","text-sm","font-medium","text-gray-900"],["type","text","name","room","id","room_doctor","placeholder","Ingrese la sala del doctor",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5",3,"ngModelChange","ngModel","value"],["for","specialty_doctor",1,"block","mb-1","text-sm","font-medium","text-gray-900"],["name","specialty","id","specialty_doctor",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5",3,"ngModelChange","ngModel","value"],[3,"value"],["for","license_doctor",1,"block","mb-1","text-sm","font-medium","text-gray-900"],["type","text","name","license","id","license_doctor","placeholder","Ingrese la licencia del doctor",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5",3,"ngModelChange","ngModel","value"],[1,"flex","flex-row","justify-end","space-x-4"],["type","button",1,"text-red-600","border-red-600","hover:bg-red-500","hover:text-white","border","font-medium","rounded-lg","text-sm","px-5","py-2.5",3,"click"],["type","submit",1,"text-white","bg-sky-800","hover:bg-sky-500","font-medium","rounded-lg","text-sm","px-5","py-2.5"]],template:function(e,n){e&1&&(t(0,"div",0)(1,"div")(2,"h2",1),r(3,"Listado de doctores"),o(),t(4,"p",2),r(5,"A continuaci\xF3n se muestra un listado de los doctores registrados en el panel de control."),o()(),t(6,"div")(7,"div",3)(8,"table",4)(9,"thead",5)(10,"tr")(11,"th",6),r(12," Doctor "),o(),t(13,"th",6),r(14," Especialidad "),o(),t(15,"th",6),r(16," Cuarto "),o(),t(17,"th",6),r(18," Contacto "),o(),t(19,"th",6),r(20," Acciones "),o()()(),t(21,"tbody"),S(22,ne,23,10,"tr",7,C),o()()()(),t(24,"div",8)(25,"nav",9)(26,"ul",10)(27,"li")(28,"button",11),g("click",function(){return n.updatePageIdx(n.pageIdx-1)}),r(29,"Anterior"),o()(),S(30,ae,3,4,"li",null,C),t(32,"li")(33,"button",12),g("click",function(){return n.updatePageIdx(n.pageIdx+1)}),r(34,"Siguiente"),o()()()()()(),L(35,de,38,13,"div",13)),e&2&&(a(22),M(n.showContentPage(n.pageIdx)),a(6),u("disabled",n.pageIdx===1),a(2),M(B(3,oe).constructor(n.pages)),a(3),u("disabled",n.pageIdx===n.pages),a(2),F(n.doctorToUpdate!==null?35:-1))},dependencies:[A,P,X,q,K,Q,H,J,z,O,Z,R],encapsulation:2})};export{te as DoctorsComponent};
