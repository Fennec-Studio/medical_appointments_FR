import{a as L}from"./chunk-FYW5DAT3.js";import{a as G,b as N}from"./chunk-PNDBIBMZ.js";import{A as l,B as _,Da as B,F as C,H as m,J as S,K as A,L as T,M as E,N as t,O as n,P as s,Q as y,R as d,S as c,V as o,W as I,X as F,Y as w,ba as V,c as f,ca as P,da as Z,ea as M,ga as h,ha as v,n as D,pa as j,ra as H,s as u,t as g,u as b,v as k,xa as U}from"./chunk-RB3ABCDU.js";var $=()=>[],O=(r,i,e)=>({"bg-green-200 text-green-800":r,"bg-blue-200 text-blue-800":i,"bg-red-200 text-red-800":e}),W=(r,i,e)=>({"bg-primaryGreen hover:bg-secondaryGreen":r,"bg-primaryBlue hover:bg-secondaryBlue":i,"bg-red-300 hover:bg-red-400":e}),z=r=>({"text-blue-600 bg-blue-100 hover:bg-blue-200 hover:text-blue-700":r}),q=r=>({hidden:r});function J(r,i){r&1&&(b(),t(0,"svg",19),s(1,"path",24),n())}function K(r,i){r&1&&(b(),t(0,"svg",19),s(1,"path",25),n())}function Q(r,i){if(r&1){let e=y();t(0,"tr",7)(1,"th",14),o(2),n(),t(3,"td",15),o(4),n(),t(5,"td",15),o(6),h(7,"dateFixed"),h(8,"timeFixed"),n(),t(9,"td",15)(10,"span",16),o(11),n()(),t(12,"td",17)(13,"button",18),d("click",function(){let p=u(e).$implicit,x=c();return g(x.updateAppointmentStatus(p.id))}),C(14,J,2,0,":svg:svg",19)(15,K,2,0,":svg:svg",19),n(),t(16,"button",20),d("click",function(){let p=u(e).$implicit,x=c();return g(x.toggleModal(p.id))}),b(),t(17,"svg",19),s(18,"path",21),n()(),k(),t(19,"button",22),d("click",function(){let p=u(e).$implicit,x=c();return g(x.deleteAppointment(p.id))}),b(),t(20,"svg",19),s(21,"path",23),n()()()()}if(r&2){let e=i.$implicit;l(2),w(" ",e.patient==null?null:e.patient.first_name," ",e.patient==null?null:e.patient.last_name," "),l(2),w(" ",e.doctor==null?null:e.doctor.first_name," ",e.doctor==null?null:e.doctor.last_name," "),l(2),w(" ",v(7,10,e.date)," ",v(8,12,e.date)," "),l(4),m("ngClass",M(14,O,e.status===0,e.status===1,e.status===2)),l(),F(" ",e.status===0?"Pendiente":e.status===1?"Atendida":"Cancelada"," "),l(2),m("ngClass",M(18,W,e.status===0,e.status===1,e.status===2)),l(),S(e.status==0?14:15)}}function X(r,i){if(r&1){let e=y();t(0,"li")(1,"button",26),d("click",function(){let p=u(e).$index,x=c();return g(x.updatePageIdx(p+1))}),o(2),n()()}if(r&2){let e=i.$index,a=c();l(),m("ngClass",Z(2,z,e+1===a.pageIdx)),l(),I(e+1)}}function Y(r,i){if(r&1){let e=y();t(0,"div",13)(1,"div",27)(2,"div",28)(3,"h2",29),o(4,"Editar cita"),n(),t(5,"button",30),d("click",function(){u(e);let p=c();return g(p.toggleModal())}),b(),t(6,"svg",31),s(7,"path",32),n()()(),k(),t(8,"div",33)(9,"div",34)(10,"label",35),o(11,"Clave \xDAnica de Registro de Poblaci\xF3n (CURP)"),n(),s(12,"input",36),n()(),t(13,"div",33)(14,"div",34)(15,"label",37),o(16,"Apellidos paciente"),n(),s(17,"input",38),n(),t(18,"div",34)(19,"label",39),o(20,"Nombre(s) paciente"),n(),s(21,"input",40),n()(),t(22,"div",33)(23,"div",34)(24,"label",41),o(25,"Fecha cita"),n(),t(26,"div",42),s(27,"input",43),h(28,"dateFixed"),n()(),t(29,"div",34)(30,"label",44),o(31,"Hora cita"),n(),t(32,"div",42),s(33,"input",45),h(34,"timeFixed"),n()()(),t(35,"div",34)(36,"label",46),o(37,"Comentarios"),n(),t(38,"textarea",47),o(39),n()(),t(40,"div",48)(41,"button",49),d("click",function(){u(e);let p=c();return g(p.toggleModal())}),o(42," Cancelar "),n(),t(43,"button",50),d("click",function(){u(e);let p=c();return g(p.toggleModal())}),o(44," Guardar "),n()()()()}if(r&2){let e=c();m("ngClass",Z(15,q,!e.showModal)),l(12),m("value",e.appointmentToUpdate.patient==null?null:e.appointmentToUpdate.patient.curp),l(5),m("value",e.appointmentToUpdate.patient==null?null:e.appointmentToUpdate.patient.last_name),l(4),m("value",e.appointmentToUpdate.patient==null?null:e.appointmentToUpdate.patient.first_name),l(6),m("value",v(28,11,e.appointmentToUpdate.date))("min",e.minDate)("max",e.maxDate),l(6),m("value",v(34,13,e.appointmentToUpdate.date))("min",e.minTime)("max",e.maxTime),l(6),I(e.appointmentToUpdate.comments)}}var R=class r{constructor(i,e,a){this._appointmentService=i;this._authService=e;this._router=a}appointmentList=[];pages=0;pageIdx=1;showModal=!1;appointmentToUpdate={};minDate="";maxDate="";minTime="08:00";maxTime="19:00";ngOnInit(){this._authService.isLogged()?this.retrieveData():this._router.navigate(["/"])}retrieveData(){return f(this,null,function*(){yield this._appointmentService.loadAppointments().subscribe(i=>{this.appointmentList=i,this.paginationSetup()})})}paginationSetup(){this.appointmentList.length===0&&(this.pages=1),this.pages=Math.ceil(this.appointmentList.length/5)}updatePageIdx(i){this.pageIdx=i}showContentPage(i){return this.pageIdx=i,this.appointmentList.slice((this.pageIdx-1)*5,this.pageIdx*5)}toggleModal(i){i&&(this.setWeekRange(),this.appointmentToUpdate=this.appointmentList.find(e=>e.id===i)),this.showModal=!this.showModal}setWeekRange(){let i=new Date,e=i.getDay(),a=new Date(i);a.setDate(i.getDate()-(e===0?6:e-1));let p=new Date(a);p.setDate(a.getDate()+6),this.minDate=new Date(a).toISOString().split("T")[0],this.maxDate=new Date(p).toISOString().split("T")[0],this.minTime="08:00",this.maxTime="19:00"}deleteAppointment(i){return f(this,null,function*(){yield this._appointmentService.deleteAppointment(i).subscribe(()=>{this.retrieveData()})})}updateAppointmentStatus(i){return f(this,null,function*(){let e=this.appointmentList.find(a=>a.id===i);e.status=e.status===0?1:0,yield this._appointmentService.updateAppointmentStatus(e).subscribe(()=>{this.retrieveData()})})}static \u0275fac=function(e){return new(e||r)(_(L),_(B),_(U))};static \u0275cmp=D({type:r,selectors:[["app-appointments"]],standalone:!0,features:[V],decls:36,vars:4,consts:[[1,"flex","flex-col","justify-center","font-IBM","bg-whiteFixed","rounded-md","shadow-sm","my-10","mx-20","p-6","space-y-4"],[1,"text-3xl","font-medium"],[1,"text-sm","text-slate-500"],[1,"relative","overflow-x-auto"],[1,"w-full","text-sm","text-left","rtl:text-right","text-gray-500"],[1,"text-xs","text-gray-700","uppercase","bg-gray-100"],["scope","col",1,"px-6","py-3"],[1,"bg-white","border-b","hover:bg-gray-50"],[1,"flex","justify-end"],["aria-label","Page navigation example"],[1,"inline-flex","-space-x-px","text-sm"],[1,"flex","items-center","justify-center","px-3","h-8","ms-0","leading-tight","text-gray-500","bg-white","border","border-e-0","border-gray-300","rounded-s-lg","hover:bg-gray-100","hover:text-gray-700",3,"click","disabled"],[1,"flex","items-center","justify-center","px-3","h-8","leading-tight","text-gray-500","bg-white","border","border-gray-300","rounded-e-lg","hover:bg-gray-100","hover:text-gray-700",3,"click","disabled"],[1,"w-full","bg-black","bg-opacity-70","h-screen","z-50","fixed","inset-0","flex","items-center",3,"ngClass"],["scope","row",1,"px-6","py-4","font-medium","text-gray-900","whitespace-nowrap"],[1,"px-6","py-4"],[1,"text-xs","font-medium","me-2","px-2.5","py-0.5","rounded",3,"ngClass"],[1,"flex","flex-row","space-x-2","px-6","py-2"],["type","button",1,"text-white","font-medium","rounded-lg","text-sm","p-2","text-center","inline-flex","items-center",3,"click","ngClass"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","none","viewBox","0 0 24 24",1,"w-4","h-4","text-white"],["type","button",1,"text-sm","p-2","text-center","inline-flex","items-center","text-white","bg-orange-300","hover:bg-orange-400","focus:ring-4","focus:outline-none","focus:ring-blue-300","font-medium","rounded-lg",3,"click"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m14.304 4.844 2.852 2.852M7 7H4a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1v-4.5m2.409-9.91a2.017 2.017 0 0 1 0 2.853l-6.844 6.844L8 14l.713-3.565 6.844-6.844a2.015 2.015 0 0 1 2.852 0Z"],["type","button",1,"text-sm","p-2","text-center","inline-flex","items-center","text-white","bg-red-400","hover:bg-red-600","focus:ring-4","focus:outline-none","focus:ring-blue-300","font-medium","rounded-lg",3,"click"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 7h14m-9 3v8m4-8v8M10 3h4a1 1 0 0 1 1 1v3H9V4a1 1 0 0 1 1-1ZM6 7h12v13a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V7Z"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 11.917 9.724 16.5 19 7.5"],["fill","currentColor","d","M4 9.05H3v2h1v-2Zm16 2h1v-2h-1v2ZM10 14a1 1 0 1 0 0 2v-2Zm4 2a1 1 0 1 0 0-2v2Zm-3 1a1 1 0 1 0 2 0h-2Zm2-4a1 1 0 1 0-2 0h2Zm-2-5.95a1 1 0 1 0 2 0h-2Zm2-3a1 1 0 1 0-2 0h2Zm-7 3a1 1 0 0 0 2 0H6Zm2-3a1 1 0 1 0-2 0h2Zm8 3a1 1 0 1 0 2 0h-2Zm2-3a1 1 0 1 0-2 0h2Zm-13 3h14v-2H5v2Zm14 0v12h2v-12h-2Zm0 12H5v2h14v-2Zm-14 0v-12H3v12h2Zm0 0H3a2 2 0 0 0 2 2v-2Zm14 0v2a2 2 0 0 0 2-2h-2Zm0-12h2a2 2 0 0 0-2-2v2Zm-14-2a2 2 0 0 0-2 2h2v-2Zm-1 6h16v-2H4v2ZM10 16h4v-2h-4v2Zm3 1v-4h-2v4h2Zm0-9.95v-3h-2v3h2Zm-5 0v-3H6v3h2Zm10 0v-3h-2v3h2Z"],[1,"flex","items-center","justify-center","px-3","h-8","leading-tight","text-gray-500","bg-white","border","border-gray-300","hover:bg-gray-100","hover:text-gray-700",3,"click","ngClass"],[1,"container","mx-auto","flex","flex-col","space-y-4","bg-white","max-w-4xl","h-auto","rounded-md","p-4"],[1,"flex","justify-between","items-center"],[1,"text-2xl","font-IBM","font-semibold"],[1,"text-white","hover:bg-gray-300","border","font-medium","rounded-lg","p-2","flex","items-center",3,"click"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","none","viewBox","0 0 24 24",1,"w-6","h-6","text-slate-800"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18 17.94 6M18 18 6.06 6"],[1,"flex","flex-row","space-x-4"],[1,"w-full"],["for","curp_patient",1,"block","mb-1","text-sm","font-medium","text-gray-900"],["type","text","id","curp_patient","placeholder","Ingrese CURP del paciente",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5",3,"value"],["for","firstName_patient",1,"block","mb-1","text-sm","font-medium","text-gray-900"],["type","text","id","firstName_patient","placeholder","Ingrese los apellidos del paciente",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5",3,"value"],["for","lastName_patient",1,"block","mb-1","text-sm","font-medium","text-gray-900"],["type","text","id","lastName_patient","placeholder","Ingrese nombre(s) del paciente",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5",3,"value"],["for","date",1,"block","mb-1","text-sm","font-medium","text-gray-900"],[1,"relative"],["type","date","id","date",1,"bg-gray-50","border","leading-none","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5",3,"value","min","max"],["for","time",1,"block","mb-1","text-sm","font-medium","text-gray-900"],["type","time","id","time",1,"bg-gray-50","border","leading-none","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5",3,"value","min","max"],["for","message",1,"block","mb-1","text-sm","font-medium","text-gray-900"],["id","message","rows","4","placeholder","Comentarios de la consulta",1,"block","p-2.5","w-full","text-sm","text-gray-900","bg-gray-50","rounded-lg","border","border-gray-300","focus:ring-blue-500","focus:border-blue-500"],[1,"flex","flex-row","justify-end","space-x-4"],["type","button",1,"text-red-600","border-red-600","hover:bg-red-500","hover:text-white","border","font-medium","rounded-lg","text-sm","px-5","py-2.5",3,"click"],["type","button",1,"text-white","bg-sky-800","hover:bg-sky-500","font-medium","rounded-lg","text-sm","px-5","py-2.5",3,"click"]],template:function(e,a){e&1&&(t(0,"div",0)(1,"div")(2,"h2",1),o(3,"Listado de citas"),n(),t(4,"p",2),o(5,"A continuaci\xF3n se muestra un listado de las citas agendadas y atendidas."),n()(),t(6,"div")(7,"div",3)(8,"table",4)(9,"thead",5)(10,"tr")(11,"th",6),o(12," Paciente "),n(),t(13,"th",6),o(14," Doctor "),n(),t(15,"th",6),o(16," Fecha "),n(),t(17,"th",6),o(18," Estado "),n(),t(19,"th",6),o(20," Acciones "),n()()(),t(21,"tbody"),T(22,Q,22,22,"tr",7,A),n()()()(),t(24,"div",8)(25,"nav",9)(26,"ul",10)(27,"li")(28,"button",11),d("click",function(){return a.updatePageIdx(a.pageIdx-1)}),o(29,"Anterior"),n()(),T(30,X,3,4,"li",null,A),t(32,"li")(33,"button",12),d("click",function(){return a.updatePageIdx(a.pageIdx+1)}),o(34,"Siguiente"),n()()()()()(),C(35,Y,45,17,"div",13)),e&2&&(l(22),E(a.showContentPage(a.pageIdx)),l(6),m("disabled",a.pageIdx===1),l(2),E(P(3,$).constructor(a.pages)),l(3),m("disabled",a.pageIdx===a.pages),l(2),S(a.appointmentToUpdate!==null?35:-1))},dependencies:[H,j,G,N],encapsulation:2})};export{R as AppointmentsComponent};
